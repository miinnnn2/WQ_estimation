<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="//cdn.rawgit.com/hiun/NanumSquare/master/nanumsquare.css">
    <link rel="stylesheet" href="css/estimation_general.css">
    <title>wedqueen</title>
</head>
<body>
<div id="form">
    <div class="form_btn">
        <button>완료</button>
    </div>
    <div class="form_title">
        <div class="title">
            <span>견적서 공유 <small>(선택)</small></span>
            <span class="point">최대 300P 적립</span>
        </div>
        <div class="info">
            <p>견적서를 공유해보세요! 다른 여신님들이 견적서를 보실 때마다<br>
            최대 300P가 적립됩니다 :D</p>
            <p class="notice">* 금액만 공유시에는 200P가 적립됩니다.</p>
        </div>
    </div>
    <div class="form_detail">
        <div class="company_info clearfix">
            <div class="company">
                <p>진행업체 1</p>
            </div>
            <div id="company_contents">
                <div class="company_name">
                    <p>꼬모다이아몬드</p>
                </div>
                <button id="btn_modify">수정</button>
                <button id="delete">삭제</button>
                <div class="company_attach">
                    <p><a href="#">견적서 첨부</a></p>
                </div>
            </div>
        </div>
        <div class="company_detail">
            <table id="detail_table">
                <tr class="table_row">
                    <td class="company"><span>상세 내용</span></td>
                    <td>
                        <input type="search" placeholder="상세 내용 추가" name="detail_contents">
                    </td>
                    <td>
                        <input type="text" name="price" value="원">
                    </td>
                </tr>
            </table>
       </div>
       <div class="add_detail">
           <button id="add">+ 추가</button>
       </div>
       <div class="budget clearfix">
            <p class="amount">합계금액</p>
            <button id="btn_modify_amount">수정</button>
            <p class="amountPrice">원</p>
        </div>
       <!-- <div class="budget clearfix">
           <p class="amount">합계금액</p>
           <input type="text" name="price" value="원">
           <button id="modify_amound_done">수정 완료</button>
       </div> -->
    </div>
</div>
<script
  src="https://code.jquery.com/jquery-3.3.1.js"
  integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
  crossorigin="anonymous"></script>
<script>
    
    let add = document.getElementById('add');

    // tag list start 
    let addTrTag = `<tr class="table_row">
                <td><span class="company">&nbsp</span></td>
                <td>
                    <input type="search" placeholder="상세 내용 추가" name="detail_contents">
                </td>
                <td>
                    <input type="text" name="price" value="원">
                </td>
            </tr>`;
    
    let companyEditTag = `
        <div class="company_name2">
            <input type="text" value="꼬모다이아몬드">
        </div>
        <button id="modify_done">수정 완료</button>
    `;

    let EditCompleteTag = `
        <div class="company_name">
            <p>꼬모다이아몬드</p>
        </div>
        <button id="btn_modify">수정</button>
        <button>삭제</button>
        <div class="company_attach">
            <p><a href="#">견적서 첨부</a></p>
        </div>
    `;

    let amountEditTag = `
        <div class="budget clearfix">
            <p class="amount">합계금액</p>
            <input type="text" name="price" value="원">
            <button id="modify_amound_done">수정 완료</button>
        </div>
    `;

     
    // tag list end 

    // evnet start 
    add.addEventListener('click', function() {
        $('#detail_table tr:last').after(addTrTag);
    });
    
    $('#btn_modify').click(function() {
        $('#company_contents').replaceWith(companyEditTag);
        $('#modify_done').click(function() {
            var result = confirm('Are you sure you want to do this?'); 
            
            if(result) {
                //yes
                location.replace('index.php');
            } else {
                //no
            }
        });
    });

    $('#delete').click(function() {
        alert("업체를 삭제하시겠습니까?");
    });

    $('#btn_modify_amount').click(function() {
        $('.budget').replaceWith(amountEditTag);
        $('#modify_amound_done').click(function() {
            alert("수정을 완료하시겠습니까?");
        });
    });

    // $('#modify_done').click(function() {
    //     $('#company_contents').replaceWith(EditCompleteTag);
    // });

    // event end
</script>
</body>
</html>